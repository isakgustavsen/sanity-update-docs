## `<SanityImage>`

This module defines a global `<SanityImage>` component to assist with rendering images from Sanity.

By default, it is a lightweight functional component that simply turns the props into a valid image URL. However, if you have [`@nuxt/image`](https://image.nuxt.com/) installed, it will automatically use `<NuxtImg>` for improved performance.

### Nuxt Image Integration

When you have `@nuxt/image` installed in your project, `<SanityImage>` will automatically detect it and render a `<NuxtImg>` component instead of a regular `<img>` tag. This allows you to leverage Nuxt Image's powerful features, such as resizing, format conversion, and optimizations.

To enable the Sanity provider within Nuxt Image, you need to configure it in your `nuxt.config.ts`:

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  image: {
    sanity: {
      projectId: 'your-project-id',
      dataset: 'your-dataset-name'
    }
  },

  sanity: {
    // module options
  }
})
```

Now, you can use `<SanityImage>` as before, and it will pass all its attributes to `<NuxtImg>`. All attributes supported by both `<NuxtImg>` and the [Sanity image API](https://www.sanity.io/docs/image-urls) can be passed as props.

```vue
<template>
  <!-- This will render a <NuxtImg> component -->
  <SanityImage
    asset-id="image-G3i4emG6B8JnTmGoN0UjgAp8-300x450-jpg"
    w="300"
    h="450"
    auto="format"
  />
</template>
```

### Basic Usage

If you are not using `@nuxt/image`, `<SanityImage>` will generate a simple `<img>` tag.

#### Props

##### `assetId`

The Sanity asset ID (of the form `image-G3i4emG6B8JnTmGoN0UjgAp8-300x450-jpg`).

- Type: **string**
- **Required**

##### `projectId` and `dataset`

These default to the `projectId` and `dataset` passed into the module options but can be overridden.

- Type: **string**

##### Image transformation props

All other image transformation options are valid props - see [the Sanity documentation](https://www.sanity.io/docs/image-urls) for more details.

#### Example

```vue
<template>
  <SanityImage
    asset-id="image-G3i4emG6B8JnTmGoN0UjgAp8-300x450-jpg"
    auto="format"
  />
</template>
```

## Renderless usage

If you pass in a default scoped slot you can use the `<SanityImage>` component as a renderless component to allow you to take full control of the functionality.

### Example

```vue
<template>
  <SanityImage
    asset-id="image-G3i4emG6B8JnTmGoN0UjgAp8-300x450-jpg"
    auto="format"
  >
    <template #default="{ src }">
      <img :src="src" />
    </template>
  </SanityImage>
</template>
```

## Using @sanity/image-url

If the `<SanityImage>` helper doesn't cover your needs, you can use [the `@sanity/image-url` package](https://github.com/sanity-io/image-url). One way to add it to your Nuxt project is through a plugin:

```js{}[plugins/sanity-image-builder.js]
import imageUrlBuilder from '@sanity/image-url'

export default defineNuxtPlugin(() => {
  const builder = imageUrlBuilder(useSanity().config)
  function urlFor(source) {
    return builder.image(source).auto('format')
  }
  return {
    provide: { urlFor }
  }
})
```

Then you can use the global `$urlFor` helper:

```vue
<template>
  <img
    :src="$urlFor(movie.image).size(426).url()"
    :alt="movie.title"
    height="426"
    width="426"
    loading="lazy"
  />
</template>
```
